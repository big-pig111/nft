<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Solana NFT Mint</title>
  <script src="https://unpkg.com/@solana/web3.js@1.88.2/lib/index.iife.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@solana/spl-token@0.3.5/lib/index.iife.min.js"></script>
  <script>
    window.splToken = window["@solana/spl-token"];
  </script>
  <style>
    body {
      font-family: sans-serif;
      padding: 2rem;
    }
    button {
      padding: 0.5rem 1rem;
      font-size: 1rem;
    }
  </style>
</head>
<body>
  <h1>üöÄ Solana ‰∏ªÁΩë NFT Èì∏ÈÄ†</h1>
  <button id="mintBtn">‰∏ÄÈîÆÈì∏ÈÄ† NFT</button>

  <script>
    (async () => {
      const web3 = solanaWeb3;
      const token = splToken;

      // ‚úÖ ‰ΩøÁî® QuickNode ‰∏ªÁΩë RPC
      const connection = new web3.Connection(
        'https://small-holy-forest.solana-mainnet.quiknode.pro/b59315ea187b3de1b3542c5c25d7f2d5b5410ff4/',
        'confirmed'
      );

      // ‚ùó‰Ω†Ëá™Â∑±ÁöÑÈí±ÂåÖÁßÅÈí•Ôºàbase58 arrayÔºâ‚ö†Ô∏èÂè™Áî®‰∫éÊµãËØïÔºåÂãøÁî®‰∫éÁúüÂÆûÈí±ÂåÖ
      const secretKey = Uint8Array.from([
        // ‚õîËØ∑ÊõøÊç¢‰∏∫‰Ω†Ëá™Â∑±ÁöÑÁßÅÈí•ÔºàÂ¶Ç‰∏ã‰ªÖ‰∏∫Á§∫‰æãÔºâ
        149, 29, 203, 13, 72, 250, 18, 115, 211, 77, 209, 111, 88, 34, 147, 189,
        182, 198, 23, 90, 156, 163, 254, 21, 95, 143, 212, 134, 202, 132, 134, 77,
        11, 100, 65, 152, 234, 22, 111, 204, 244, 84, 101, 218, 173, 132, 110, 3,
        98, 125, 211, 151, 91, 218, 190, 35, 115, 194, 40, 134, 107, 92, 143, 62
      ]);
      const payer = web3.Keypair.fromSecretKey(secretKey);

      document.getElementById('mintBtn').onclick = async () => {
        try {
          const mint = web3.Keypair.generate();

          const lamports = await token.getMinimumBalanceForRentExemptMint(connection);
          const tx = new web3.Transaction().add(
            web3.SystemProgram.createAccount({
              fromPubkey: payer.publicKey,
              newAccountPubkey: mint.publicKey,
              lamports,
              space: token.MINT_SIZE,
              programId: token.TOKEN_PROGRAM_ID,
            }),
            token.createInitializeMintInstruction(
              mint.publicKey,
              0,
              payer.publicKey,
              payer.publicKey,
              token.TOKEN_PROGRAM_ID
            ),
            token.createAssociatedTokenAccountInstruction(
              payer.publicKey,
              await token.getAssociatedTokenAddress(
                mint.publicKey,
                payer.publicKey
              ),
              payer.publicKey,
              mint.publicKey
            ),
            token.createMintToInstruction(
              mint.publicKey,
              await token.getAssociatedTokenAddress(
                mint.publicKey,
                payer.publicKey
              ),
              payer.publicKey,
              1
            )
          );

          const sig = await web3.sendAndConfirmTransaction(connection, tx, [payer, mint]);
          alert("‚úÖ NFT minted! Signature:\n" + sig);
        } catch (e) {
          console.error(e);
          alert("‚ùå Error: " + e.message);
        }
      };
    })();
  </script>
</body>
</html>
